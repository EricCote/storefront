import { fixupConfigRules, fixupPluginRules } from '@eslint/compat';
import typescriptEslint from '@typescript-eslint/eslint-plugin';
import _import from 'eslint-plugin-import';
import { defineConfig, globalIgnores } from 'eslint/config';
import nextVitals from 'eslint-config-next/core-web-vitals';
import path from 'node:path';
import { fileURLToPath } from 'node:url';
import js from '@eslint/js';

import eslintNextPlugin from '@next/eslint-plugin-next';

// const __filename = fileURLToPath(import.meta.url);
// const __dirname = path.dirname(__filename);
// const compat = new FlatCompat({
// 	baseDirectory: __dirname,
// 	recommendedConfig: js.configs.recommended,
// 	allConfig: js.configs.all,
// });

const eslintConfig = defineConfig([
	...nextVitals,

	// globalIgnores([
	// 	'**/*.js',
	// 	'**/*.jsx',
	// 	'**/*.cjs',
	// 	'src/checkout/src/graphql',
	// 	'src/app/old/**/*',
	// 	'src/app/old/',
	// 	'**/.next/',
	// 	'**/node_modules/',
	// 	'**/dist/',
	// 	'**/build/',
	// ]),
	// {
	// 	extends: fixupConfigRules(
	// 		compat.extends(
	// 			'plugin:@typescript-eslint/recommended',
	// 			'plugin:@typescript-eslint/recommended-requiring-type-checking',
	// 			'plugin:import/recommended',
	// 			'plugin:import/typescript',
	// 			'prettier',
	// 		),
	// 	),

	// 	plugins: {
	// 		'@typescript-eslint': fixupPluginRules(typescriptEslint),
	// 		import: fixupPluginRules(_import),
	// 	},

	// 	languageOptions: {
	// 		ecmaVersion: 'latest',
	// 		sourceType: 'script',

	// 		parserOptions: {
	// 			project: 'tsconfig.json',
	// 		},
	// 	},

	// 	rules: {
	// 		'import/order': 'error',
	// 		'import/no-mutable-exports': 'error',
	// 		'import/no-cycle': 'error',
	// 		'import/no-default-export': 'error',
	// 		'import/no-unresolved': 'error',

	// 		'@typescript-eslint/no-empty-object-type': [
	// 			'error',
	// 			{
	// 				allowObjectTypes: 'always',
	// 				allowInterfaces: 'always',
	// 			},
	// 		],

	// 		'@typescript-eslint/consistent-type-imports': [
	// 			'error',
	// 			{
	// 				prefer: 'type-imports',
	// 				fixStyle: 'inline-type-imports',
	// 				disallowTypeAnnotations: false,
	// 			},
	// 		],

	// 		'import/no-duplicates': [
	// 			'error',
	// 			{
	// 				'prefer-inline': true,
	// 			},
	// 		],

	// 		'import/namespace': ['off'],
	// 		'no-empty-pattern': 'off',
	// 		'@typescript-eslint/no-empty-interface': 'off',
	// 		'@typescript-eslint/no-empty-function': 'off',
	// 		'@typescript-eslint/require-await': 'off',
	// 		'@typescript-eslint/return-await': ['error', 'in-try-catch'],

	// 		'@typescript-eslint/no-unused-vars': [
	// 			'error',
	// 			{
	// 				argsIgnorePattern: '^_',
	// 				varsIgnorePattern: '^_',
	// 			},
	// 		],

	// 		'@typescript-eslint/restrict-template-expressions': [
	// 			'error',
	// 			{
	// 				allowNumber: true,
	// 				allowBoolean: true,
	// 			},
	// 		],

	// 		'@typescript-eslint/no-explicit-any': 'off',

	// 		'@typescript-eslint/no-misused-promises': [
	// 			'error',
	// 			{
	// 				checksVoidReturn: false,
	// 			},
	// 		],
	// 	},
	// },
	// {
	// 	files: ['src/app/**/{page,layout,error,loading,not-found}.tsx', '**/*.ts'],

	// 	rules: {
	// 		'import/no-default-export': 'off',
	// 	},
	// },
	// {
	// 	files: ['src/checkout/**/*.{ts,tsx}'],

	// 	rules: {
	// 		'no-restricted-imports': [
	// 			'error',
	// 			{
	// 				patterns: [
	// 					{
	// 						group: ['next/*', '@next/*', 'next'],
	// 						message:
	// 							'Usage of Next.js-specific imports inside src/checkout is forbidden. Checkout is a standalone component and should not depend on Next.js.',
	// 					},
	// 				],
	// 			},
	// 		],
	// 	},
	// },
	// {
	// 	files: ['__tests__/**/*.{ts,tsx}'],
	// 	extends: [...compat.extends('plugin:playwright/recommended')],
	// },
]);

export default eslintConfig;
